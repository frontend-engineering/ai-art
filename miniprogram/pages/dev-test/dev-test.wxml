<!--
  开发者模式测试页面
  用于测试和演示开发者模式功能
-->
<view class="dev-test-page">
  <!-- 自定义导航栏 -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px; height: {{statusBarHeight + navBarHeight}}px;">
    <view class="nav-left">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">‹</text>
      </view>
    </view>
    <text class="nav-title">开发者模式测试</text>
    <view class="nav-right" bindtap="handleStatusBarTap">
      <text class="tap-hint">点击5次激活</text>
    </view>
  </view>

  <!-- 主内容 -->
  <scroll-view class="content" scroll-y style="padding-top: {{statusBarHeight + navBarHeight}}px;">
    <!-- 状态卡片 -->
    <view class="card">
      <text class="card-title">🔧 开发者模式状态</text>
      <view class="status-item">
        <text class="label">模式状态:</text>
        <text class="value {{devModeActive ? 'active' : 'inactive'}}">
          {{devModeActive ? '✅ 已激活' : '❌ 未激活'}}
        </text>
      </view>
      <view class="status-item">
        <text class="label">当前使用次数:</text>
        <text class="value">{{usageCount}}</text>
      </view>
    </view>

    <!-- 说明卡片 -->
    <view class="card">
      <text class="card-title">📖 使用说明</text>
      <view class="instruction">
        <text class="instruction-item">1. 快速点击导航栏右侧 5 次来激活开发者模式</text>
        <text class="instruction-item">2. 激活后会显示开发者面板</text>
        <text class="instruction-item">3. 在面板中可以快速设置或增加使用次数</text>
        <text class="instruction-item">4. 支持快速按钮（0、1、3、5、10、99 次）</text>
        <text class="instruction-item">5. 也可以输入自定义数字进行设置</text>
      </view>
    </view>

    <!-- 功能卡片 -->
    <view class="card">
      <text class="card-title">⚙️ 快速操作</text>
      <button class="action-btn" bindtap="showDevPanel" wx:if="{{devModeActive}}">
        打开开发者面板
      </button>
      <view class="disabled-hint" wx:else>
        请先激活开发者模式
      </view>
    </view>

    <!-- 技术信息 -->
    <view class="card">
      <text class="card-title">ℹ️ 技术信息</text>
      <view class="tech-info">
        <text class="info-item">状态栏高度: {{statusBarHeight}}px</text>
        <text class="info-item">导航栏高度: {{navBarHeight}}px</text>
        <text class="info-item">胶囊按钮右边距: {{menuRight}}px</text>
      </view>
    </view>
  </scroll-view>

  <!-- 开发者面板 -->
  <dev-mode-panel
    visible="{{showDevPanel}}"
    usageCount="{{usageCount}}"
    bind:close="closeDevPanel"
    bind:update="onDevPanelUpdate"
  />
</view>
