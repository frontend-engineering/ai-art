<!--
  邀请好友页面
  显示邀请码、统计信息和邀请记录
-->
<view class="invite-page page-with-nav {{isElderMode ? 'elder-mode' : ''}}">
  <!-- 四角装饰背景 -->
  <corner-background />
  
  <!-- 背景渐变 -->
  <view class="invite-bg"></view>
  
  <!-- 大小字切换按钮（右上角，胶囊按钮下方） -->
  <view class="elder-mode-toggle-fixed" style="top: {{statusBarHeight + navBarHeight + 16}}px; right: {{menuRight}}px; left: auto;">
    <elder-mode-toggle />
  </view>
  
  <!-- 顶部导航栏 -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px; height: {{statusBarHeight + navBarHeight}}px;">
    <view class="nav-left">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">‹</text>
      </view>
    </view>
    <text class="nav-title">邀请好友</text>
    <view class="nav-right"></view>
  </view>
  
  <!-- 主内容区 -->
  <scroll-view class="invite-content" scroll-y style="padding-top: {{statusBarHeight + navBarHeight}}px;">
    <!-- 邀请卡片 -->
    <view class="invite-card">
      <view class="card-header">
        <text class="card-icon">🎁</text>
        <text class="card-title">邀请好友得次数</text>
      </view>
      
      <view class="card-desc">
        <text>每成功邀请1位好友注册</text>
        <text class="highlight">即可获得1次生成机会</text>
      </view>
      
      <!-- 分享说明 -->
      <view class="share-hint">
        <text class="hint-icon">💡</text>
        <text class="hint-text">点击下方按钮分享给好友，好友通过您的分享链接注册后，您将自动获得奖励</text>
      </view>
      
      <!-- 分享按钮 -->
      <button class="share-btn" open-type="share">
        <text class="share-icon">📤</text>
        <text class="share-text">分享给好友</text>
      </button>
    </view>
    
    <!-- 邀请统计 -->
    <view class="stats-section">
      <view class="stats-title">邀请统计</view>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{stats.total_invites}}</text>
          <text class="stat-label">总邀请数</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.successful_invites}}</text>
          <text class="stat-label">成功邀请</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.total_rewards}}</text>
          <text class="stat-label">获得次数</text>
        </view>
      </view>
    </view>
    
    <!-- 邀请记录 -->
    <view class="records-section">
      <view class="records-title">邀请记录</view>
      <view class="records-list" wx:if="{{records.length > 0}}">
        <view class="record-item" wx:for="{{records}}" wx:key="id">
          <view class="record-avatar">
            <text class="avatar-icon">👤</text>
          </view>
          <view class="record-info">
            <text class="record-name">{{item.invitee_nickname || '新用户'}}</text>
            <text class="record-time">{{item.created_at}}</text>
          </view>
          <view class="record-reward" wx:if="{{item.reward_granted}}">
            <text class="reward-icon">✓</text>
            <text class="reward-text">+1次</text>
          </view>
        </view>
      </view>
      <view class="empty-state" wx:else>
        <text class="empty-icon">📭</text>
        <text class="empty-text">还没有邀请记录</text>
        <text class="empty-hint">快去邀请好友吧！</text>
      </view>
    </view>
    
    <!-- 邀请规则说明 -->
    <view class="rules-section">
      <view class="rules-title">邀请规则</view>
      <view class="rules-list">
        <view class="rule-item">
          <text class="rule-number">1</text>
          <text class="rule-text">点击"分享给好友"按钮，将邀请链接分享给好友</text>
        </view>
        <view class="rule-item">
          <text class="rule-number">2</text>
          <text class="rule-text">好友通过您的分享链接注册后，您将自动获得1次生成机会</text>
        </view>
        <view class="rule-item">
          <text class="rule-number">3</text>
          <text class="rule-text">每位好友只能被邀请一次</text>
        </view>
        <view class="rule-item">
          <text class="rule-number">4</text>
          <text class="rule-text">邀请次数无上限，多邀多得</text>
        </view>
      </view>
    </view>
  </scroll-view>
</view>
