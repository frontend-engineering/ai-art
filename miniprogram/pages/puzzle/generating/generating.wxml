<!--
  æ—¶ç©ºæ‹¼å›¾æ¨¡å¼ç”Ÿæˆä¸­é¡µé¢ - å¤ç”¨åŸç½‘é¡µ GeneratingPage æ ·å¼
  Requirements: 2.2, 14.1-14.5
-->
<view class="generating-page {{isElderMode ? 'elder-mode' : ''}}">
  <!-- å››è§’è£…é¥°èƒŒæ™¯ -->
  <corner-background />
  
  <!-- èƒŒæ™¯ -->
  <view class="generating-bg"></view>
  
  <!-- è£…é¥°å…ƒç´  -->
  <view class="decorations">
    <text class="decoration lantern-1 animate-float">ğŸ®</text>
    <text class="decoration lantern-2 animate-float-delay">ğŸ®</text>
    <text class="decoration sparkle animate-twinkle">âœ¨</text>
  </view>
  
  <!-- ä¸»å†…å®¹åŒº -->
  <view class="generating-content">
    <!-- ä¸»ç¯ç¬¼åŠ¨ç”» -->
    <view class="lantern-wrapper animate-bounce">
      <view class="lantern-glow"></view>
      <text class="main-lantern">ğŸ®</text>
    </view>
    
    <!-- æ ‡é¢˜ -->
    <text class="title">AIå…¨å®¶ç¦ç”Ÿæˆä¸­</text>
    
    <!-- è¿›åº¦æ¡ -->
    <view class="progress-wrapper" wx:if="{{!error}}">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{progress}}%">
          <view class="progress-shine"></view>
        </view>
      </view>
      
      <!-- è¿›åº¦ä¿¡æ¯ -->
      <view class="progress-info">
        <text class="progress-percent">{{progress}}%</text>
        <view class="stage-info">
          <text class="stage-text">{{currentStage}}...</text>
          <text class="blessing-text">{{blessing}}</text>
        </view>
        <text class="task-message" wx:if="{{taskMessage}}">{{taskMessage}}</text>
      </view>
    </view>
    
    <!-- çŠ¶æ€æç¤ºå¡ç‰‡ -->
    <view class="status-card" wx:if="{{!error && progress < 100}}">
      <text class="status-title">æ­£åœ¨ç”Ÿæˆä¸­</text>
      <text class="status-desc">AIæ­£åœ¨ä¸ºæ‚¨åˆæˆå…¨å®¶ç¦ï¼Œè¯·è€å¿ƒç­‰å¾…...</text>
      <text class="retry-info" wx:if="{{retryCount > 0}}">å·²é‡è¯• {{retryCount}} æ¬¡</text>
    </view>
    
    <!-- é”™è¯¯æç¤º -->
    <view class="error-card" wx:if="{{error}}">
      <text class="error-icon">âš ï¸</text>
      <text class="error-title">ç”Ÿæˆå¤±è´¥</text>
      <text class="error-message">{{error}}</text>
      <view 
        class="retry-btn {{isRetrying ? 'loading' : ''}} {{!canRetry ? 'disabled' : ''}}"
        bindtap="handleRetry"
        wx:if="{{canRetry}}"
      >
        <text class="retry-btn-text">{{isRetrying ? 'é‡è¯•ä¸­...' : 'ç‚¹å‡»é‡è¯•'}}</text>
      </view>
      <view class="home-btn" bindtap="goHome" wx:if="{{!canRetry}}">
        <text class="home-btn-text">è¿”å›é¦–é¡µ</text>
      </view>
    </view>
    
    <!-- æ¸©é¦¨æç¤º -->
    <text class="tip-text" wx:if="{{!error}}">é¡µé¢åˆ·æ–°åå¯é€šè¿‡å†å²è®°å½•æŸ¥çœ‹ç»“æœ</text>
  </view>
</view>
