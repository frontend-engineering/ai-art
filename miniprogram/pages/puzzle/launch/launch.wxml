<!--
  时空拼图模式启动页 - 复用原网页 PuzzleLaunchScreen 样式
  Requirements: 2.2
-->
<view class="puzzle-launch-page page-with-nav {{isElderMode ? 'elder-mode' : ''}}">
  <!-- 四角装饰背景 -->
  <corner-background />
  
  <!-- 红色渐变背景 -->
  <image class="launch-bg-image" src="{{commonBgUrl}}" mode="aspectFill" />
  <view class="launch-bg"></view>
  
  <!-- 大小字切换按钮（右上角，胶囊按钮下方） -->
  <view class="elder-mode-toggle-fixed" style="top: {{statusBarHeight + navBarHeight + 16}}px; right: {{menuRight}}px; left: auto;">
    <elder-mode-toggle />
  </view>
  
  <!-- 顶部导航栏 -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px; height: {{statusBarHeight + navBarHeight}}px;" bindtap="onNavBarTap">
    <view class="nav-left">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">‹</text>
      </view>
    </view>
    <text class="nav-title">时空拼图</text>
    <view class="nav-right"></view>
  </view>
  
  <!-- 主内容区 -->
  <view class="launch-content">
    <!-- 使用次数显示 -->
    <usage-display 
      usageCount="{{usageCount}}" 
      userType="{{userType}}"
      isElderMode="{{isElderMode}}"
    />
    
    <!-- 标题区域 -->
    <view class="title-section animate-fade-in">
      <text class="slogan-text">这个春节，让爱没有距离</text>
    </view>
    
    <!-- 模式图标和名称 -->
    <view class="mode-section animate-scale-in">
      <view class="mode-icon-wrapper">
        <text class="mode-icon">{{modeConfig.icon}}</text>
      </view>
      <text class="mode-name">{{modeConfig.name}}</text>
      <text class="mode-slogan">{{modeConfig.slogan}}</text>
    </view>
    
    <!-- 预览区域 -->
    <view class="preview-section animate-fade-in">
      <view class="preview-card">
        <view class="preview-photos">
          <view class="photo-item">
            <text class="photo-icon">👤</text>
          </view>
          <view class="photo-item">
            <text class="photo-icon">👤</text>
          </view>
          <view class="photo-item">
            <text class="photo-icon">👤</text>
          </view>
        </view>
        <view class="preview-arrow">
          <text class="arrow-text">→</text>
        </view>
        <view class="preview-result">
          <view class="result-placeholder">
            <text class="result-icon">👨‍👩‍👧‍👦</text>
            <text class="result-text">全家福</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 功能说明 -->
    <view class="description-section animate-fade-in">
      <view class="description-card">
        <text class="description-text">{{modeConfig.description}}</text>
      </view>
      <view class="guide-card">
        <text class="guide-text">{{modeConfig.uploadGuide}}</text>
      </view>
    </view>
    
    <!-- 立即制作按钮 -->
    <view class="action-section">
      <view class="start-btn {{buttonDisabled ? 'disabled' : ''}}" bindtap="handleStart" hover-class="{{buttonDisabled ? '' : 'start-btn-hover'}}">
        <view class="btn-inner">
          <text class="btn-text">{{buttonText}}</text>
        </view>
        <!-- 光效动画 -->
        <view class="btn-shine" wx:if="{{!buttonDisabled}}"></view>
      </view>
      
      <!-- 历史记录入口 -->
      <view class="history-entry" bindtap="viewHistory">
        <text class="history-icon">📋</text>
        <text class="history-text">查看历史记录</text>
      </view>
      
      <!-- AI生成提示 -->
      <view class="ai-notice">
        <text class="ai-notice-text">本服务为AI生成内容，结果仅供参考</text>
      </view>
    </view>
  </view>
  
  <!-- 使用次数模态框 -->
  <usage-modal
    visible="{{showModal}}"
    modalType="{{modalType}}"
    usageCount="{{usageCount}}"
    isElderMode="{{isElderMode}}"
    bind:close="onModalClose"
    bind:payment="onModalPayment"
    bind:share="onModalShare"
  />
  
  <!-- 支付模态框 -->
  <payment-modal
    visible="{{showPaymentModal}}"
    isElderMode="{{isElderMode}}"
    bind:complete="onPaymentComplete"
    bind:close="closePaymentModal"
  />
  
  <!-- 开发者模式面板 -->
  <dev-mode-panel
    visible="{{showDevPanel}}"
    usageCount="{{usageCount}}"
    bind:close="closeDevPanel"
    bind:update="onDevPanelUpdate"
  />
</view>
